<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--customer invoice template. --> 
    <template id="customer_invoice_report">
        <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                    <div>
                        <p align='center'><br/><u><strong><span style="font-size: 18px;">Customer Invoice</span></strong></u></p> 
                    </div>
                    <div >
                        <p align='left'><strong><span>From Date: </span></strong><span  t-field="docs.start_date"/></p> 
                        <p align='left'><strong><span >To Date: </span></strong><span  t-field="docs.end_date"/></p> 
                    </div><br/>
                    <table class="table table-condensed" >
                        <tbody>
                            <tr>
                                <td><strong><span>Customer</span></strong></td> 
                                <td><strong><span>Amount</span></strong> </td>
                            </tr>  
                            <t t-set='Partner_list' t-value="[]"/>
                                <t t-foreach="partner_ids" t-as="partner_name" >
                                    <t t-if="partner_name">
                                        <t t-if="partner_name.partner_id.id not in Partner_list">
                                            <tr>
                                                 <t t-set="test_variable" t-value="0.00" />    
                                                 <t t-foreach="partner_ids" t-as="partner"> 
                                                     <t t-if="partner_name.partner_id.id == partner.partner_id.id">
                                                         <tr>
                                                             <t t-set="test_variable" t-value="test_variable+partner.amount_total"/>
                                                         </tr>
                                                     </t>
                                                 </t>
                                            </tr>
                                            <td><t t-esc="partner_name.partner_id.name"/></td>
                                            <td><t t-esc="test_variable"/></td>
                                        </t>
                                    </t>
                                    <t t-set="Partner_list" t-value="Partner_list+[partner_name.partner_id.id]"/>
                                </t>
                        </tbody>         
                    </table>
                </div>
            </t>
        </t>
        </t>
    </template>
</odoo>
