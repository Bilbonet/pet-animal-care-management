<?xml version="1.0" encoding="utf-8"?>
<odoo>
   <!--Sequence number-->
    <record id="pet_seq_number" model="ir.sequence">
        <field name="name">Pet Number</field>
        <field name="code">pet.information</field>
        <field name="prefix">PET/%(year)s/</field>
        <field name="padding">4</field>
        <field name="implementation">no_gap</field>
    </record>
    <!--Pet Information Kanban View--> 
    <record id="product_kanban_view" model="ir.ui.view">
        <field name="name">pet.information</field>
        <field name="model">pet.information</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="id"/>
                <field name='pet_sub_type_id'/>
                <field name='pet_color_id'/>
                <field name='sex'/>
                <field name="image_small"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('pet.information', 'image_small', record.id.raw_value)" alt='image'/>
                            </div>
                            <div class="oe_kanban_details">
                                <ul>
                                    <strong><field name="name"/></strong>
                                    <li t-if="record.pet_sub_type_id.raw_value"><strong><span>Type: </span></strong><field name="pet_sub_type_id"/></li>
                                    <li t-if="record.pet_color_id.raw_value"><strong><span>Color: </span></strong><field name="pet_color_id"/></li>
                                    <li t-if="record.sex.raw_value"><strong><span>Sex: </span></strong><field name="sex"/></li>
                                </ul>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!--Pet Information Tree View--> 
    <record id="open_pet_tree_view" model="ir.ui.view">
        <field name="name">pet.information.tree</field>
        <field name="model">pet.information</field>
        <field name="arch" type="xml">
            <tree string="Pet">
                <field name='number'/>
                <field name='name'/>
                <field name='pet_type_id'/>
                <field name='pet_sub_type_id'/>
                <field name='pet_color_id'/>
                <field name='sex'/>
                <field name='veterinarian_id'/>
            </tree>
        </field>
    </record>

    <!--Pet Information Form View--> 
    <record id="open_pet_form_view" model="ir.ui.view">
        <field name="name">pet.information.form</field>
        <field name="model">pet.information</field>
        <field name="arch" type="xml">
            <form string="Pet">
                <sheet>
                    <field name="image_medium" widget="image" class="oe_avatar"/>
                    <div class="oe_title">
                        <label class="oe_edit_only" for="name" string="Pet Name"/>
                        <h1><field name="name" placeholder="Pet Name" required='True'/></h1>
                    </div>
                    <group string='Pet Information'>
                        <group>
                            <field name='number'/>
                            <field name='pet_type_id' widget='selection' required='True'/>
                            <field name='pet_sub_type_ids' widget='many2many_tags' invisible='True'/>
                            <field name='pet_sub_type_id' attrs="{'invisible': [('pet_type_id','=', False)]}"
                                   domain = "[('id','in',pet_sub_type_ids)]"/>
                            <field name='pet_color_id'/>
                        </group>
                        <group>
                            <field name='pet_birth_date' string='Date Of Birth'/>
                            <field name='sex'/>
                            <field name='veterinarian_id' required='True' domain = "[('is_veterinarian','=',True)]" widget='selection'/>
                        </group>
                    </group>
                    <group string='Client Information'>
                        <group>
                            <field name='partner_id' required='True'/>
                            <field name='email' widget='email'/>
                            <field name='birth_date'/>
                        </group>
                        <group>
                            <field name='mobile' widget='phone'/>
                            <field name='gender'/>
                        </group>
                    </group>
                    <notebook>
                        <page string='Vaccine Details'>
                            <field name='vaccine_ids'>
                                <tree editable='bottom'>
                                    <field name='vaccine_id' required='True'/>
                                    <field name='date' required='True'/>
                                    <field name='vaccine_state' string='State' required='True'/>
                                </tree> 
                            </field>
                        </page>
                        <page string='Food Details'>
                            <field name='food_ids'>
                                <tree editable='bottom'>
                                    <field name='food_id' required='True' domain = "[('is_food','=',True)]"/>
                                    <field name='day_ids' widget='many2many_tags' required='True'/>
                                </tree> 
                            </field>
                        </page>   
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action for all view--> 
    <record id="action_pet" model="ir.actions.act_window">
        <field name="name">Pet</field>
        <field name="res_model">pet.information</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="view_id" ref="product_kanban_view" />
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to add a new pet.
            </p>
        </field>
    </record>

    <menuitem id="menu_pet_information"
    name="Pet Information"
    parent="menu_root_pet_animal_care_mangement"
    sequence="21"/>

    <menuitem id="menu_pet"
    name="Pet"
    parent="menu_pet_information"
    action='action_pet'
    sequence="22"/>
</odoo>
